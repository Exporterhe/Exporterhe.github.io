<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>centos环境下部署ELK</title>
    <link href="/2025/03/26/centos%E7%8E%AF%E5%A2%83%E4%B8%8B%E9%83%A8%E7%BD%B2ELK/"/>
    <url>/2025/03/26/centos%E7%8E%AF%E5%A2%83%E4%B8%8B%E9%83%A8%E7%BD%B2ELK/</url>
    
    <content type="html"><![CDATA[<p>ELK是一种用于处理日志数据和分析的开源软件套件，由Elasticsearch、Logstash和Kibana组成。在centos环境下部署ELK需要以下步骤：<br>1.安装Java环境<br>ELK需要使用Java环境，因此需要先安装Java环境。可以使用以下命令安装：<br>sudo yum install java<br>2.安装Elasticsearch<br>Elasticsearch是一个分布式搜索和分析引擎，用于存储和查询数据。可以使用以下步骤安装Elasticsearch：<br>sudo rpm –import <a href="https://artifacts.elastic.co/GPG-KEY-elasticsearch">https://artifacts.elastic.co/GPG-KEY-elasticsearch</a><br>sudo vi &#x2F;etc&#x2F;yum.repos.d&#x2F;elasticsearch.repo<br>复制以下文本到elasticsearch.repo文件中：<br>[elasticsearch-7.x]<br>name&#x3D;Elasticsearch repository for 7.x packages<br>baseurl&#x3D;<a href="https://artifacts.elastic.co/packages/7.x/yum">https://artifacts.elastic.co/packages/7.x/yum</a><br>gpgcheck&#x3D;1<br>gpgkey&#x3D;<a href="https://artifacts.elastic.co/GPG-KEY-elasticsearch">https://artifacts.elastic.co/GPG-KEY-elasticsearch</a><br>enabled&#x3D;1<br>autorefresh&#x3D;1<br>type&#x3D;rpm-md<br>保存并关闭文件后，使用以下命令安装：<br>sudo yum install elasticsearch<br>3.配置Elasticsearch<br>安装完成后，需要编辑Elasticsearch配置文件&#x2F;etc&#x2F;elasticsearch&#x2F;elasticsearch.yml。在该文件中，可以设置Elasticsearch监听的IP地址和端口等参数。例如，可以添加以下内容：<br>network.host: 0.0.0.0<br>http.port: 9200<br>保存并关闭文件后，使用以下命令启动Elasticsearch：<br>sudo systemctl start elasticsearch<br>sudo systemctl enable elasticsearch</p><p>sudo systemctl status elasticsearch –查看服务运行日志<br>bootstrap check failure [1] of [1]: the default discovery settings are unsuitable for production use; at least one of [discovery.seed_hosts, discovery.seed_providers, cluster.initial_master_nodes] must be configured<br>这个问题通常是因为在Elasticsearch中使用了默认的发现设置，不适合生产环境使用。您需要根据您的具体环境配置至少一个发现设置。<br>以下是解决问题的步骤：<br>1.打开 Elasticsearch 配置文件 (&#x2F;etc&#x2F;elasticsearch&#x2F;elasticsearch.yml)。<br>2.找到以下参数之一：discovery.seed_hosts, discovery.seed_providers 或 cluster.initial_master_nodes。<br>3.配置至少一个参数。例如，您可以在配置文件中添加以下行以设置discovery.seed_hosts：<br>discovery.seed_hosts: [“host”, “host”]</p><p>4.保存文件并重新启动 Elasticsearch。<br>5.验证 Elasticsearch 是否可以正常工作。您可以通过执行如下命令来检查 Elasticsearch 的健康状况：<br>curl -XGET ‘<a href="http://localhost:9200/_cluster/health?pretty=true%E2%80%99">http://localhost:9200/_cluster/health?pretty=true’</a></p><p>如果 Elasticsearch 健康状态显示为 “green”或 “yellow”，则表示 Elasticsearch 可以正常工作。<br>希望这可以帮助您解决问题。<br>4.安装Logstash<br>Logstash是一个数据收集和转换工具，用于将各种数据源的数据发送到Elasticsearch进行分析和查询。可以使用以下步骤安装Logstash：<br>sudo rpm –import <a href="https://artifacts.elastic.co/GPG-KEY-elasticsearch">https://artifacts.elastic.co/GPG-KEY-elasticsearch</a><br>sudo vi &#x2F;etc&#x2F;yum.repos.d&#x2F;logstash.repo<br>复制以下文本到logstash.repo文件中：<br>[logstash-7.x]<br>name&#x3D;Elastic repository for 7.x packages<br>baseurl&#x3D;<a href="https://artifacts.elastic.co/packages/7.x/yum">https://artifacts.elastic.co/packages/7.x/yum</a><br>gpgcheck&#x3D;1<br>gpgkey&#x3D;<a href="https://artifacts.elastic.co/GPG-KEY-elasticsearch">https://artifacts.elastic.co/GPG-KEY-elasticsearch</a><br>enabled&#x3D;1<br>autorefresh&#x3D;1<br>type&#x3D;rpm-md<br>保存并关闭文件后，使用以下命令安装：<br>sudo yum install logstash<br>5.配置Logstash<br>安装完成后，需要编辑Logstash配置文件&#x2F;etc&#x2F;logstash&#x2F;conf.d&#x2F;logstash.conf。在该文件中，可以设置Logstash如何处理数据。例如，可以添加以下内容：<br>input {<br>file {<br>type &#x3D;&gt; “syslog”<br>path &#x3D;&gt; [ “&#x2F;var&#x2F;log&#x2F;messages” ]<br>}<br>}<br>filter {<br>if [type] &#x3D;&#x3D; “syslog” {<br>grok {<br>match &#x3D;&gt; { “message” &#x3D;&gt; “%{SYSLOGTIMESTAMP:syslog_timestamp} %{SYSLOGHOST:syslog_hostname} %{DATA:syslog_program}(?:[%{POSINT:syslog_pid}])?: %{GREEDYDATA:syslog_message}” }<br>}<br>date {<br>match &#x3D;&gt; [ “syslog_timestamp”, “MMM d HH:mm:ss”, “MMM dd HH:mm:ss” ]<br>}<br>}<br>}<br>output {<br>elasticsearch {<br>hosts &#x3D;&gt; [“localhost:9200”]<br>index &#x3D;&gt; “logstash-%{+YYYY.MM.dd}”<br>}<br>}<br>以上配置示例展示了Logstash如何读取系统日志文件&#x2F;var&#x2F;log&#x2F;messages并使用正则表达式解析其中的内容，然后将结果发送到Elasticsearch进行分析和查询。<br>6.启动Logstash<br>保存并关闭文件后，使用以下命令启动Logstash：<br>sudo systemctl start logstash<br>sudo systemctl enable logstash</p><p>Logstash.service缺失<br>如果您需要重新安装 Logstash 或手动创建服务文件，可以参考以下步骤：<br>重新安装 Logstash：<br>如果您使用的是 CentOS 或者 Red Hat 等基于 RPM 的 Linux 发行版，可以使用以下命令重新安装 Logstash：<br>sudo yum remove logstash<br>sudo yum install logstash</p><p>如果您使用的是 Ubuntu 或者 Debian 等基于 APT 的 Linux 发行版，可以使用以下命令重新安装 Logstash：<br>sudo apt-get remove logstash<br>sudo apt-get install logstash</p><p>手动创建服务文件：<br>如果您需要手动创建 Logstash 的服务文件，可以按照以下步骤操作：<br>在<br>&#x2F;etc&#x2F;systemd&#x2F;system&#x2F; 目录下创建一个名为<br>logstash.service 的文件，并添加以下内容：<br>[Unit]<br>Description&#x3D;logstash<br>After&#x3D;network-online.target</p><p>[Service]<br>User&#x3D;logstash<br>Group&#x3D;logstash<br>ExecStart&#x3D;&#x2F;usr&#x2F;share&#x2F;logstash&#x2F;bin&#x2F;logstash –path.settings &#x2F;etc&#x2F;logstash&#x2F;</p><p>[Install]<br>WantedBy&#x3D;multi-user.target</p><p>这个服务文件假设 Logstash 的安装路径为 &#x2F;usr&#x2F;share&#x2F;logstash，配置文件路径为 &#x2F;etc&#x2F;logstash。您可以根据实际情况进行修改。<br>保存该文件后，执行以下命令重新加载 systemd 的配置文件：<br>sudo systemctl daemon-reload</p><p>最后执行以下命令启动并开机自启动 Logstash 服务：<br>sudo systemctl start logstash<br>sudo systemctl enable logstash</p><p>通过以上步骤，应该能够重新安装 Logstash 或手动创建服务文件，并正确启用 Logstash 服务。<br>7.安装Kibana<br>Kibana是一个用于可视化和分析数据的Web界面，可以将Elasticsearch中的数据可视化并提供一些分析功能。可以使用以下步骤安装Kibana：<br>sudo rpm –import <a href="https://artifacts.elastic.co/GPG-KEY-elasticsearch">https://artifacts.elastic.co/GPG-KEY-elasticsearch</a><br>sudo vi &#x2F;etc&#x2F;yum.repos.d&#x2F;kibana.repo<br>复制以下文本到kibana.repo文件中：<br>[kibana-7.x]<br>name&#x3D;Kibana repository for 7.x packages<br>baseurl&#x3D;<a href="https://artifacts.elastic.co/packages/7.x/yum">https://artifacts.elastic.co/packages/7.x/yum</a><br>gpgcheck&#x3D;1<br>gpgkey&#x3D;<a href="https://artifacts.elastic.co/GPG-KEY-elasticsearch">https://artifacts.elastic.co/GPG-KEY-elasticsearch</a><br>enabled&#x3D;1<br>autorefresh&#x3D;1<br>type&#x3D;rpm-md<br>保存并关闭文件后，使用以下命令安装：<br>sudo yum install kibana<br>8.配置Kibana<br>安装完成后，需要编辑Kibana配置文件&#x2F;etc&#x2F;kibana&#x2F;kibana.yml。在该文件中，可以设置Kibana监听的IP地址和端口等参数。例如，可以添加以下内容：<br>server.host: “0.0.0.0”<br>server.port: 5601<br>elasticsearch.hosts: [“<a href="http://localhost:9200”]">http://localhost:9200”]</a><br>保存并关闭文件后，使用以下命令启动Kibana：<br>sudo systemctl start kibana<br>sudo systemctl enable kibana<br>9.访问Kibana<br>现在可以通过http:&#x2F;&#x2F;服务器IP地址:5601访问Kibana。在Kibana的Web界面中，可以配置和运行各种查询和分析操作，以便对Elasticsearch中的数据进行可视化和分析。<br>以上就是在centos环境下部署ELK的全部步骤。</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2025/03/26/hello-world/"/>
    <url>/2025/03/26/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
